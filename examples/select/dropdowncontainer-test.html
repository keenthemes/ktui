<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dropdown Container Test (Issue #52)</title>
	<link rel="stylesheet" href="../../dist/styles.css">
</head>

<body class="bg-gray-50 min-h-screen">
	<!-- Test 1: Default Placement (Control) -->
	<div class="bg-white rounded-lg shadow p-8 w-full max-w-sm mt-10 mx-auto mb-6">
		<form class="flex flex-col gap-6">
			<div>
				<label class="block mb-2 font-medium text-gray-700">Test 1: Default (No dropdownContainer)</label>
				<p class="text-sm text-gray-500 mb-3">Expected: Selected class updates correctly</p>
				<select
					id="test-default"
					class="kt-select"
					data-kt-select="true"
					data-kt-select-placeholder="Select a framework...">
					<option value="react">React</option>
					<option value="nextjs">Next.js</option>
					<option value="angular">Angular</option>
					<option value="vue">Vue</option>
					<option value="svelte">Svelte</option>
				</select>
			</div>
		</form>
	</div>

	<!-- Test 2: dropdownContainer: "body" (Issue #52) -->
	<div class="bg-white rounded-lg shadow p-8 w-full max-w-sm mx-auto mb-6">
		<form class="flex flex-col gap-6">
			<div>
				<label class="block mb-2 font-medium text-gray-700">Test 2: dropdownContainer: "body"</label>
				<p class="text-sm text-gray-500 mb-3">
					Expected: Selected class updates correctly<br>
				</p>
				<select
					id="test-body"
					class="kt-select"
					data-kt-select="true"
					data-kt-select-placeholder="Select a language..."
					data-kt-select-config='{
						"dropdownContainer": "body"
					}'>
					<option value="javascript">JavaScript</option>
					<option value="typescript">TypeScript</option>
					<option value="python">Python</option>
					<option value="rust">Rust</option>
					<option value="go">Go</option>
				</select>
			</div>
		</form>
	</div>

	<!-- Test 3: Custom Container -->
	<div class="bg-white rounded-lg shadow p-8 w-full max-w-sm mx-auto mb-6">
		<form class="flex flex-col gap-6">
			<div>
				<label class="block mb-2 font-medium text-gray-700">Test 3: dropdownContainer: "#custom-container"</label>
				<p class="text-sm text-gray-500 mb-3">Expected: Selected class updates correctly</p>
				<select
					id="test-custom"
					class="kt-select"
					data-kt-select="true"
					data-kt-select-placeholder="Select a database..."
					data-kt-select-config='{
						"dropdownContainer": "#custom-container"
					}'>
					<option value="postgresql">PostgreSQL</option>
					<option value="mysql">MySQL</option>
					<option value="mongodb">MongoDB</option>
					<option value="redis">Redis</option>
					<option value="sqlite">SQLite</option>
				</select>
			</div>
		</form>
	</div>

	<!-- Custom container element -->
	<div id="custom-container"></div>

	<script src="../../dist/ktui.js"></script>
	<script>
		// Add console logging to help with debugging
		document.addEventListener('DOMContentLoaded', function() {
			// Add change listeners to log selected class status
			['test-default', 'test-body', 'test-custom'].forEach(id => {
				const select = document.getElementById(id);
				if (select) {
					select.addEventListener('change', function() {
						setTimeout(() => {
							const dropdown = select.nextElementSibling?.querySelector('[data-kt-select-dropdown]');
							if (dropdown) {
								const options = dropdown.querySelectorAll('[data-kt-select-option]');
								const selectedCount = dropdown.querySelectorAll('[data-kt-select-option].selected').length;
								console.log(`${id}: Found ${options.length} options, ${selectedCount} with .selected class`);
							}
						}, 100);
					});
				}
			});
		});
	</script>
</body>

</html>

