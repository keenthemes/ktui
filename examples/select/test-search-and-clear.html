<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>KTSelect Test - Search Autofocus & Clear Selection</title>
	<link rel="stylesheet" href="../../dist/styles.css">
	<style>
		.test-section {
			margin-bottom: 2rem;
			padding: 1.5rem;
			border: 1px solid #e5e7eb;
			border-radius: 0.5rem;
			background: #f9fafb;
		}
		.test-section h3 {
			margin-top: 0;
			margin-bottom: 1rem;
			color: #111827;
			font-size: 1.125rem;
			font-weight: 600;
		}
		.test-section p {
			margin-bottom: 0.75rem;
			color: #6b7280;
			font-size: 0.875rem;
		}
		.button-group {
			display: flex;
			gap: 0.5rem;
			flex-wrap: wrap;
			margin-top: 1rem;
		}
		.btn {
			padding: 0.5rem 1rem;
			background: #3b82f6;
			color: white;
			border: none;
			border-radius: 0.375rem;
			cursor: pointer;
			font-size: 0.875rem;
			font-weight: 500;
		}
		.btn:hover {
			background: #2563eb;
		}
		.btn-secondary {
			background: #6b7280;
		}
		.btn-secondary:hover {
			background: #4b5563;
		}
		.status {
			margin-top: 0.75rem;
			padding: 0.5rem;
			background: #dbeafe;
			border: 1px solid #93c5fd;
			border-radius: 0.375rem;
			font-size: 0.875rem;
			color: #1e40af;
		}
	</style>
</head>

<body class="bg-gray-50 min-h-screen py-10">
	<div class="bg-white rounded-lg shadow p-8 w-full max-w-2xl mt-10 mx-auto">
		<h1 class="text-2xl font-bold mb-6 text-gray-900">KTSelect Test Examples</h1>

		<!-- Test 1: Search Autofocus & Clear on Close -->
		<div class="test-section">
			<h3>Test 1: Search Autofocus & Clear on Close</h3>
			<p>This select has search enabled with autofocus and clear-on-close features.</p>
			<p><strong>Test:</strong> Open the dropdown - search input should autofocus. Type something, close dropdown, reopen - search should be cleared.</p>
			<select
				id="select-search-test"
				class="kt-select"
				data-kt-select="true"
				data-kt-select-enable-search="true"
				data-kt-select-search-autofocus="true"
				data-kt-select-clear-search-on-close="true"
				data-kt-select-placeholder="Search and select a framework"
				data-kt-select-search-placeholder="Type to search..."
				data-kt-select-config='{
					"optionsClass": "kt-scrollable overflow-auto max-h-[250px]"
				}'
			>
				<option value="">Select a framework</option>
				<option value="react">React</option>
				<option value="nextjs">Next.js</option>
				<option value="angular">Angular</option>
				<option value="vue">Vue</option>
				<option value="svelte">Svelte</option>
				<option value="ember">Ember</option>
				<option value="nuxt">Nuxt.js</option>
				<option value="remix">Remix</option>
				<option value="solid">Solid.js</option>
				<option value="qwik">Qwik</option>
			</select>
			<div class="button-group">
				<button class="btn" onclick="clearSelection1()">Clear Selection</button>
				<button class="btn btn-secondary" onclick="showStatus1()">Show Selected</button>
			</div>
			<div id="status1" class="status" style="display: none;"></div>
		</div>

		<!-- Test 2: Single Select with Allow Clear -->
		<div class="test-section">
			<h3>Test 2: Single Select - Clear/Deselect Options</h3>
			<p>This select allows clearing selections. Use the buttons to test clearing and deselecting.</p>
			<select
				id="select-clear-test"
				class="kt-select"
				data-kt-select="true"
				data-kt-select-allow-clear="true"
				data-kt-select-placeholder="Select a language"
				data-kt-select-config='{
					"optionsClass": "kt-scrollable overflow-auto max-h-[250px]"
				}'
			>
				<option value="">Select a language</option>
				<option value="js">JavaScript</option>
				<option value="ts">TypeScript</option>
				<option value="py">Python</option>
				<option value="java">Java</option>
				<option value="go">Go</option>
				<option value="rust">Rust</option>
			</select>
			<div class="button-group">
				<button class="btn" onclick="selectOption('js')">Select JavaScript</button>
				<button class="btn" onclick="selectOption('ts')">Select TypeScript</button>
				<button class="btn" onclick="deselectOption('js')">Deselect JavaScript</button>
				<button class="btn" onclick="clearSelection2()">Clear All</button>
				<button class="btn btn-secondary" onclick="showStatus2()">Show Selected</button>
			</div>
			<div id="status2" class="status" style="display: none;"></div>
		</div>

		<!-- Test 3: Multiple Select -->
		<div class="test-section">
			<h3>Test 3: Multiple Select - Deselect Individual Options</h3>
			<p>This is a multiple select. You can select multiple options and deselect them individually.</p>
			<select
				id="select-multiple-test"
				class="kt-select"
				data-kt-select="true"
				data-kt-select-multiple="true"
				data-kt-select-enable-search="true"
				data-kt-select-placeholder="Select multiple frameworks"
				data-kt-select-config='{
					"optionsClass": "kt-scrollable overflow-auto max-h-[250px]"
				}'
			>
				<option value="">Select frameworks</option>
				<option value="react">React</option>
				<option value="vue">Vue</option>
				<option value="angular">Angular</option>
				<option value="svelte">Svelte</option>
				<option value="solid">Solid.js</option>
			</select>
			<div class="button-group">
				<button class="btn" onclick="selectMultiple(['react', 'vue'])">Select React & Vue</button>
				<button class="btn" onclick="deselectMultiple('react')">Deselect React</button>
				<button class="btn" onclick="clearSelection3()">Clear All</button>
				<button class="btn btn-secondary" onclick="showStatus3()">Show Selected</button>
			</div>
			<div id="status3" class="status" style="display: none;"></div>
		</div>

		<!-- Test 4: Search without Clear on Close -->
		<div class="test-section">
			<h3>Test 4: Search Persists on Close (clearSearchOnClose=false)</h3>
			<p>This select keeps the search text when you close and reopen the dropdown.</p>
			<select
				id="select-search-persist"
				class="kt-select"
				data-kt-select="true"
				data-kt-select-enable-search="true"
				data-kt-select-search-autofocus="true"
				data-kt-select-clear-search-on-close="false"
				data-kt-select-placeholder="Search (text persists)"
				data-kt-select-config='{
					"optionsClass": "kt-scrollable overflow-auto max-h-[250px]"
				}'
			>
				<option value="">Select an option</option>
				<option value="apple">Apple</option>
				<option value="banana">Banana</option>
				<option value="cherry">Cherry</option>
				<option value="date">Date</option>
				<option value="elderberry">Elderberry</option>
				<option value="fig">Fig</option>
				<option value="grape">Grape</option>
			</select>
			<p style="margin-top: 0.5rem; font-size: 0.75rem; color: #9ca3af;">
				Type "a" in search, close dropdown, reopen - search text should still be there.
			</p>
		</div>
	</div>

	<script src="../../dist/ktui.js"></script>
	<script>
		// Wait for DOM and KTSelect to be ready
		document.addEventListener('DOMContentLoaded', function() {
			// Initialize all selects
			KTSelect.init();
		});

		// Test 1 Functions
		function clearSelection1() {
			const select = KTSelect.getInstance(document.getElementById('select-search-test'));
			if (select) {
				select.clearSelection();
				showStatus1();
			}
		}

		function showStatus1() {
			const select = KTSelect.getInstance(document.getElementById('select-search-test'));
			const statusEl = document.getElementById('status1');
			if (select && statusEl) {
				const selected = select.getSelectedOptions();
				statusEl.style.display = 'block';
				statusEl.textContent = selected.length > 0
					? `Selected: ${selected.join(', ')}`
					: 'No selection';
			}
		}

		// Test 2 Functions
		function selectOption(value) {
			const select = KTSelect.getInstance(document.getElementById('select-clear-test'));
			if (select) {
				select.toggleSelection(value);
				showStatus2();
			}
		}

		function deselectOption(value) {
			const select = KTSelect.getInstance(document.getElementById('select-clear-test'));
			if (select) {
				select.deselectOption(value);
				showStatus2();
			}
		}

		function clearSelection2() {
			const select = KTSelect.getInstance(document.getElementById('select-clear-test'));
			if (select) {
				select.clearSelection();
				showStatus2();
			}
		}

		function showStatus2() {
			const select = KTSelect.getInstance(document.getElementById('select-clear-test'));
			const statusEl = document.getElementById('status2');
			if (select && statusEl) {
				const selected = select.getSelectedOptions();
				statusEl.style.display = 'block';
				statusEl.textContent = selected.length > 0
					? `Selected: ${selected.join(', ')}`
					: 'No selection';
			}
		}

		// Test 3 Functions
		function selectMultiple(values) {
			const select = KTSelect.getInstance(document.getElementById('select-multiple-test'));
			if (select) {
				values.forEach(value => {
					if (!select.getSelectedOptions().includes(value)) {
						select.toggleSelection(value);
					}
				});
				showStatus3();
			}
		}

		function deselectMultiple(value) {
			const select = KTSelect.getInstance(document.getElementById('select-multiple-test'));
			if (select) {
				select.deselectOption(value);
				showStatus3();
			}
		}

		function clearSelection3() {
			const select = KTSelect.getInstance(document.getElementById('select-multiple-test'));
			if (select) {
				select.clearSelection();
				showStatus3();
			}
		}

		function showStatus3() {
			const select = KTSelect.getInstance(document.getElementById('select-multiple-test'));
			const statusEl = document.getElementById('status3');
			if (select && statusEl) {
				const selected = select.getSelectedOptions();
				statusEl.style.display = 'block';
				statusEl.textContent = selected.length > 0
					? `Selected (${selected.length}): ${selected.join(', ')}`
					: 'No selection';
			}
		}
	</script>
</body>

</html>
